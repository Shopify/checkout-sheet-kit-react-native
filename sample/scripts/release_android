 #!/usr/bin/env bash

set -e
set +x

cd sample

mkdir -p android/app/src/main/assets
npx react-native bundle --platform android \
  --dev false \
  --entry-file index.js \
  --bundle-output android/app/src/main/assets/index.android.bundle \

npx react-native build-android --mode=release

echo "\n\nTo test the production release build locally, run the following"
echo "\tcd sample && npx react-native run-android --mode=release"
echo "\n\nNote that you may need to first uninstall the previous version of the app."
echo "\nTo do so, run:"
echo "\tadb uninstall com.shopify.checkoutkitreactnative"
echo "\nOutput bundle location: \"sample/android/app/build/outputs/bundle/release/app-release.aab\""
